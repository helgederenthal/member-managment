generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Person {
  id                     Int       @id @default(autoincrement())
  createdAt              DateTime  @default(now())
  updatedAt              DateTime  @updatedAt
  firstname              String
  lastname               String?
  street                 String?
  postcode               Int?
  city                   String?
  dateOfBirth            DateTime?
  joinedAt               DateTime?
  authorizationMandate   Mandate?  @relation(name: "authorizationMandat", fields: [authorizationMandateId], references: [id])
  authorizationMandateId Int?
  issuedMandates         Mandate[]
}

model Mandate {
  id              Int      @id @default(autoincrement())
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  accountHolder   Person   @relation(fields: [accountHolderId], references: [id])
  accountHolderId Int
  amount          Float
  signedAt        DateTime
  persons         Person[] @relation("authorizationMandat")
}
