@using MemberManagement.Shared
@inject HttpClient Http

@if (IsLoaded)
{
    @ChildContent
}

@code
{
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    public bool IsLoaded { get; set; }

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        if (!IsLoaded)
        {
            var appSettings = await Http.GetFromJsonAsync<ClientAppSettings>("api/ClientAppSettings");
            if (appSettings != null)
            {
                AppSettings.Title = appSettings.Title;
            }
            IsLoaded = true;
        }
    }
}